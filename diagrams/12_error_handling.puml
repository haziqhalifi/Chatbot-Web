@startuml Error Handling Flow
!theme plain
title Error Handling Activity Diagram

start

:User makes request;

:Process request;

if (Request processing successful?) then (yes)
    :Return success response;
    stop
else (no)
    :Exception occurred;
    
    if (Exception type?) then (Authentication Error)
        :Log auth error;
        :Return 401 Unauthorized;
        :Redirect to login;
    else (Validation Error)
        :Log validation error;
        :Return 400 Bad Request;
        :Show validation message;
    else (Database Error)
        :Log database error;
        :Return 500 Internal Server Error;
        :Show generic error message;
    else (AI Model Error)
        :Log AI error;
        :Return 503 Service Unavailable;
        :Show AI unavailable message;
    else (Rate Limit Error)
        :Log rate limit hit;
        :Return 429 Too Many Requests;
        :Show rate limit message;
    else (File Upload Error)
        :Log file error;
        :Return 400 Bad Request;
        :Show file error message;
    else (Unknown Error)
        :Log unknown error;
        :Return 500 Internal Server Error;
        :Show generic error message;
    endif
    
    :Send error response;
    :Display error to user;
endif

stop
@enduml
