@startuml Application Startup Flow
!theme plain
title Application Startup Activity Diagram

start

:Application starts;

:Load environment variables;

:Initialize database connection;

:Update database schema;

if (Schema update successful?) then (yes)
    :Create subscription tables;
    :Initialize FAQ table;
    :Insert default FAQs;
    :Initialize RAG system;
    if (RAG initialization successful?) then (yes)
        :Load embeddings.pkl;
        :Initialize vector search;
        :RAG system ready;
    else (no)
        :Log RAG warning;
        :Continue without RAG;
    endif
else (no)
    :Log database error;
    :Exit application;
    stop
endif

:Create FastAPI app;

:Configure CORS middleware;

:Register route modules;

split
    :Register auth routes;
split again
    :Register AI routes;
split again
    :Register chat routes;
split again
    :Register admin routes;
split again
    :Register notification routes;
split again
    :Register subscription routes;
split again
    :Register profile routes;
split again
    :Register report routes;
split again
    :Register health routes;
end split

:Start server;

:Application ready;

stop
@enduml
